!function(t,n,e){"use strict";function r(t){return"[object Array]"==={}.toString.call(t)}n.prototype["catch"]=function(t){return this.then(e,t)};for(var o={resolve:function(t){return t instanceof n?t:new this(function(n){n(t)})},reject:function(t){return new this(function(n,e){e(t)})},all:function(t){return new this(function(n,e){r(t)||e(new TypeError);var i=t.length,c=[];if(!i)return void n(c);for(var s=0,u=t.length;u>s;s++)!function(r){o.resolve(t[r]).then(function(t){c[r]=t,--i||n(c)},function(t){e(t)})}(s)})},race:function(t){return new this(function(n,e){r(t)||e(new TypeError);for(var i=0,c=t.length;c>i;i++)o.resolve(t[i]).then(function(t){n(t)},function(t){e(t)})})}},i=["resolve","reject","all","race"],c=0,s=i.length;s>c;c++)!function(t){n[t]=function(n){if("function"!=typeof this)throw new TypeError;return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError}),o[t].call(this,n)}}(i[c]);"object"==typeof module?module.exports=n:t.Promise||(t.Promise=n)}(this,function(t,n){"use strict";function e(t){if(!(this instanceof e)||this._handler)throw new TypeError("Promise shall be called as a constructor");if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");var n=this._handler=new r;try{t(function(t){n.resolve(t)},function(t){n.reject(t)})}catch(o){n.reject(o)}}function r(){this.state=0,this.callbacks=[],this.errbacks=[],this.result=void 0,this.reason=void 0}function o(t,e,r,o){return function(i){var c;try{c=o.call(n,i)}catch(s){return void r(s)}return c===t?void r(new TypeError("Cannot resolve a promise with itself")):void e(c)}}function i(t,e){c(t)&&(t=[t]);for(var r=0,o=t.length;o>r;r++)!function(t){setTimeout(function(){t.call(n,e)},0)}(t[r]);t.length=0}function c(t){return"function"==typeof t}function s(t){if(!t||"object"!=typeof t&&!c(t))return!1;var n=t.then;return c(n)&&function(e,r){n.call(t,e,r)}}return e.prototype.then=function(t,n){var r,i,s=new e(function(t,n){r=t,i=n});return this._handler.then(c(t)?o(s,r,i,t):r,c(n)?o(s,r,i,n):i),s},r.prototype={constructor:r,then:function(t,n){2===this.state?i(t,this.result):3===this.state?i(n,this.reason):(this.callbacks.push(t),this.errbacks.push(n))},resolve:function(t){if(!(this.state>1)){var n;try{n=s(t)}catch(e){return void this.reject(e)}if(n)return void this.follow(n);this.state=2,this.result=t,i(this.callbacks,t)}},reject:function(t){this.state>1||(this.state=3,this.reason=t,i(this.errbacks,t))},follow:function(t){this.state=1;var n=this,e=!0;try{t(function(t){e&&n.resolve(t),e=!1},function(t){e&&n.reject(t),e=!1})}catch(r){e&&n.reject(r),e=!1}}},e}(this));